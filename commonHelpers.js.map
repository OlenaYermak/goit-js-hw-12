{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n export const loadMoreBtn = document.querySelector(\".load-more-btn\");\nconst KEY = \"42504906-5b025263817bd530cbe95d02a\";\nconst BASE_URL = \"https://pixabay.com/api/\";\n// let pageCurrent;\n// const perPage = 15; \n\nasync function getImages(QUERY, pageCurrent, perPage) {\n    const URL = `${BASE_URL}?key=${KEY}&q=${QUERY}&image_type=photo&orientation=horizontal&safesearch=true&page=${pageCurrent}&per_page=${perPage}`;\n    \n    \n     try {\n    const response = await axios.get(URL);\n\n    if (!response.data.hits || response.data.hits.length === 0) {\n      iziToast.warning({\n         message: \"Sorry, there are no images matching your search query. Please try again!\",\n         messageColor: \"#ffffff\", \n        backgroundColor: \"#B51B1B\",\n        position: \"topRight\",\n       });\n       }\n    else if (\n      response.data.totalHits < (pageCurrent * perPage)) {\n             iziToast.error({\n                 position: \"topRight\",\n                 message: \"We're sorry, but you've reached the end of search results.\"\n             });\n             loadMoreBtn.style.display = \"none\";\n    }\n      \n\n    return response.data;\n  } catch (error) {\n    console.error(\"Error images:\", error);\n    throw error;\n  }\n}\n  \n\nexport { getImages };\n\n  \n  \n  \n\n\n  \n  \n  \n  \n  \n  \n  \n  \n","\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\n\nfunction displayImg (images) {\n  const galleryContainer = document.querySelector(\".image-container\");\n\n\n  images.forEach((image) => {\n    const imageCard = document.createElement(\"li\");\n    imageCard.classList.add(\"image-card\");\n\n    const imageUrl = image.webformatURL;\n    const imageAlt = image.tags;\nconst imageLike = image.likes;\nconst imageView = image.views;\nconst imageComments = image.comments;\nconst imageDownloads = image.downloads;\n\n    imageCard.innerHTML = `\n      <a href=\"${image.largeImageURL}\" data-lightbox=\"gallery\" data-title=\"${imageAlt}\">\n        <img src=\"${imageUrl}\" alt=\"${imageAlt}\" loading=\"lazy\">\n      </a>\n      <ul class=\"card-list\">\n      <li class=\"card-list-item\">\n      <h3 class=\"card-title\">Likes:</h3>\n     <p class=\"card-text\"> ${imageLike}</p>\n     </li>\n     <li class=\"card-list-item\">\n     <h3 class=\"card-title\">Views:</h3>\n     <p class=\"card-text\">${imageView}</p>\n     </li>\n     <li class=\"card-list-item\">\n     <h3 class=\"card-title\">Comments:</h3>\n     <p class=\"card-text\">${imageComments}</p>\n     </li>\n     <li class=\"card-list-item\">\n     <h3 class=\"card-title\">Downloads:</h3>\n     <p class=\"card-text\">${imageDownloads}</p>\n     </li>\n     </ul>\n    `;\n\n\n\n\n    galleryContainer.appendChild(imageCard);\n  });\n\n\n  const lightbox = new SimpleLightbox(\".image-card a\");\n  lightbox.refresh();\n}\n\n\n\nexport { displayImg };\n\n\n\n","// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { getImages } from \"./js/pixabay-api.js\";\nimport { displayImg } from \"./js/render-functions\";\nimport { loadMoreBtn } from \"./js/pixabay-api.js\";\n\nconst searchForm = document.querySelector(\".form-search\");\nconst inputForm = document.querySelector(\".form-input\");\nconst loader = document.querySelector(\".loader\");\n\n\nlet pageCurrent;\nconst perPage = 15;\nlet currentQuery;\n\nsearchForm.addEventListener(\"submit\", handleFormSubmit);\nloadMoreBtn.addEventListener(\"click\", loadMoreImages);\n\n\nfunction handleFormSubmit(event) {\n  event.preventDefault();\n\n  const QUERY = inputForm.value.trim();\n\n  if (QUERY === \"\") {\n    return;\n  }\n\n  clearGallery();\n\n   showLoader();\n   getImages(QUERY, pageCurrent, perPage)\n       .then(data => {\n        displayImg(data.hits);\n        currentQuery = QUERY;\n        pageCurrent = 1;\n        showLoadMoreBtn();\n      })\n   \n       \n   .catch(error => {\n     console.error(error);\n   })\n   .finally(() => {\n     hideLoader();\n   });\n}\n\nfunction loadMoreImages(event) { \n\n pageCurrent++;\ngetImages(currentQuery, pageCurrent, 15)\n    .then(data => {\n   \ndisplayImg(data.hits);\n                \n   scrollNewImage();             \n    })\n    .catch(error => {\n      console.error(error);\n    });\n}\n\nfunction getGalleryCardHeight() {\n  const galleryCard = document.querySelector(\".image-card\");\n\n  if (galleryCard) {\n    let cardHeight = galleryCard.getBoundingClientRect().height;\n    return cardHeight;\n  }\n\n}\n\nfunction scrollNewImage() {\n  const cardHeight = getGalleryCardHeight();\n\n  if (cardHeight) {\n    \n    window.scrollBy({\n       top: (cardHeight * 2), \n      behavior: 'smooth',\n    });\n  }\n}\n\n\n\nfunction clearGallery() {\n  let galleryContainer = document.querySelector(\".image-container\");\n  galleryContainer.innerHTML = \"\";\n}\n\nfunction showLoader() {\n  loader.style.display = \"block\";\n}\n\nfunction hideLoader() {\n  loader.style.display = \"none\";\n}\nfunction showLoadMoreBtn() {\n  loadMoreBtn.style.display = 'block';\n}\n\n\n\n\n"],"names":["loadMoreBtn","KEY","BASE_URL","getImages","QUERY","pageCurrent","perPage","URL","response","axios","iziToast","error","displayImg","images","galleryContainer","image","imageCard","imageUrl","imageAlt","imageLike","imageView","imageComments","imageDownloads","SimpleLightbox","searchForm","inputForm","loader","currentQuery","handleFormSubmit","loadMoreImages","event","clearGallery","showLoader","data","showLoadMoreBtn","hideLoader","scrollNewImage","getGalleryCardHeight","galleryCard","cardHeight"],"mappings":"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"}